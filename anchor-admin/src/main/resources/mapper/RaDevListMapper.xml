<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gov.web.mapper.RaDevListMapper">

    <sql id="Base_Column_List">
        id,device_Id,remark
    </sql>

    <update id="createTable" >
        CREATE TABLE `${tableName}` (
        `id` int NOT NULL AUTO_INCREMENT,
        `value1` decimal(10,6) NOT NULL,
        `value2` decimal(10,6) NOT NULL,
        `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
        PRIMARY KEY (`id`)
        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
    </update>

    <insert id="insertInfoBatch">
        INSERT INTO `${tableName}` (
        `value1`,`value2`,`create_time`
        ) VALUES
        <foreach collection="list" item="item" separator=",">
            (
            #{item.value1},#{item.value2},#{item.createTime}
            )
        </foreach>
    </insert>

    <select id="queryTable" resultType="com.gov.web.domain.RaData" >
        SELECT
        `value1`,`value2`
        FROM `${tableName}`
        <where>
            <if test="strTime != null  and strTime != ''">  and `create_time`  <![CDATA[ >= ]]> #{strTime}</if>
            <if test="endTime != null  and endTime != ''">  and `create_time` <![CDATA[ <= ]]> #{endTime}</if>
        </where>
        order by create_time desc
    </select>
</mapper>
